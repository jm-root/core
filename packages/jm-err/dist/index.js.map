{"version":3,"file":"index.js","sources":["../lib/locale/zh_CN.js","../lib/locale/index.js","../lib/index.js"],"sourcesContent":["module.exports = {\n  'Success': '成功',\n  'Fail': '失败',\n  'System Error': '系统错误',\n  'Network Error': '网络错误',\n  'Parameter Error': '参数错误',\n  'Busy': '忙',\n  'Time Out': '超时',\n  'Abort': '中止',\n  'Not Ready': '未准备好',\n  'Not Exists': '不存在',\n  'Already Exists': '已存在',\n  'Validation Error': '校验错误',\n  'OK': 'OK',\n  'Bad Request': '错误请求',\n  'Unauthorized': '未验证',\n  'Forbidden': '无权限',\n  'Not Found': '未找到',\n  'Internal Server Error': '服务器内部错误',\n  'Service Unavailable': '无效服务'\n}\n","const lngs = {\n  zh_CN: require('./zh_CN')\n}\n\n/**\n * translate\n * @param {string} msg - msg to be translate\n * @param {string} lng - language\n * @return {String | null}\n */\nmodule.exports = function (msg, lng) {\n  if (!lng || !lngs[lng]) return null\n  return lngs[lng][msg]\n};\n","/**\n * err module.\n * @module err\n */\n\nconst t = require('./locale')\n\nfunction isNumber (obj) {\n  return typeof obj === 'number' && isFinite(obj)\n}\n\n/**\n * common error defines\n *\n */\nlet Err = {\n  SUCCESS: {\n    err: 0,\n    msg: 'Success'\n  },\n\n  FAIL: {\n    err: 1,\n    msg: 'Fail'\n  },\n\n  FA_SYS: {\n    err: 2,\n    msg: 'System Error'\n  },\n\n  FA_NETWORK: {\n    err: 3,\n    msg: 'Network Error'\n  },\n\n  FA_PARAMS: {\n    err: 4,\n    msg: 'Parameter Error'\n  },\n\n  FA_BUSY: {\n    err: 5,\n    msg: 'Busy'\n  },\n\n  FA_TIMEOUT: {\n    err: 6,\n    msg: 'Time Out'\n  },\n\n  FA_ABORT: {\n    err: 7,\n    msg: 'Abort'\n  },\n\n  FA_NOTREADY: {\n    err: 8,\n    msg: 'Not Ready'\n  },\n\n  FA_NOTEXISTS: {\n    err: 9,\n    msg: 'Not Exists'\n  },\n\n  FA_EXISTS: {\n    err: 10,\n    msg: 'Already Exists'\n  },\n\n  FA_VALIDATION: {\n    err: 11,\n    msg: 'Validation Error'\n  },\n\n  OK: {\n    err: 200,\n    msg: 'OK'\n  },\n\n  FA_BADREQUEST: {\n    err: 400,\n    msg: 'Bad Request'\n  },\n\n  FA_NOAUTH: {\n    err: 401,\n    msg: 'Unauthorized'\n  },\n\n  FA_NOPERMISSION: {\n    err: 403,\n    msg: 'Forbidden'\n  },\n\n  FA_NOTFOUND: {\n    err: 404,\n    msg: 'Not Found'\n  },\n\n  FA_INTERNALERROR: {\n    err: 500,\n    msg: 'Internal Server Error'\n  },\n\n  FA_UNAVAILABLE: {\n    err: 503,\n    msg: 'Service Unavailable'\n  }\n}\n\nErr.t = t\n\n/**\n * return message from template\n *\n * ```javascript\n * errMsg('sampe ${name} ${value}', {name: 'jeff', value: 123});\n * // return 'sample jeff 123'\n * ```\n *\n * @param {String} msg message template\n * @param {Object} opts params\n * @return {String} final message\n */\nfunction errMsg (msg, opts) {\n  if (opts) {\n    for (let key in opts) {\n      msg = msg.split('${' + key + '}').join(opts[key])\n    }\n  }\n  return msg\n}\n\n/**\n * return an Error Object\n * @param {Object|String} E Err object or a message template\n * @param {Object} [opts] params\n * @return {Error}\n */\nfunction err (E, opts){\n  if (typeof E === 'string') {\n    E = {\n      msg: E\n    }\n  }\n  let msg = errMsg(E.msg || E.message, opts)\n  let code = E.err\n  code === undefined && (code = Err.FAIL.err)\n  let status = Err.FA_INTERNALERROR.err\n  if (code === Err.SUCCESS.err) status = 200\n  if (isNumber(code) && code >= 200 && code <= 600) status = code\n  E.status !== undefined && (status = E.status)\n  let e = new Error(msg)\n  e.code = code\n  e.status = status\n  e.data = Object.assign(E, {err: code, msg, status})\n  return e\n}\n\n/**\n * enable Err Object, errMsg and err function for obj\n * @param {Object} obj target object\n * @param {String} [name] name to bind\n * @return {boolean}\n */\nfunction enableErr(obj, name = 'Err') {\n  if (obj[name]) return false\n  obj[name] = Err\n  obj.err = err\n  obj.errMsg = errMsg\n  return true\n}\n\n/**\n * disable Err Object, errMsg and err function for obj\n * @param {Object} obj target object\n * @param {String} [name] name to bind\n */\nfunction disableErr(obj, name = 'Err') {\n  if (!obj[name]) return\n  delete obj[name]\n  delete obj.err\n  delete obj.errMsg\n}\n\nlet $ = {\n  Err: Err,\n  errMsg: errMsg,\n  err: err,\n  enableErr: enableErr,\n  disableErr: disableErr\n}\n\nmodule.exports = $\n"],"names":["lngs","zh_CN","require$$0","msg","lng","isNumber","obj","isFinite","Err","SUCCESS","err","FAIL","FA_SYS","FA_NETWORK","FA_PARAMS","FA_BUSY","FA_TIMEOUT","FA_ABORT","FA_NOTREADY","FA_NOTEXISTS","FA_EXISTS","FA_VALIDATION","OK","FA_BADREQUEST","FA_NOAUTH","FA_NOPERMISSION","FA_NOTFOUND","FA_INTERNALERROR","FA_UNAVAILABLE","t","errMsg","opts","key","split","join","E","message","code","undefined","status","e","Error","data","Object","assign","enableErr","name","disableErr","$"],"mappings":"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"}