{"version":3,"file":"index.js","sources":["../lib/locale/zh_CN.js","../lib/locale/index.js","../lib/index.js"],"sourcesContent":["module.exports = {\n  'Success': '成功',\n  'Fail': '失败',\n  'System Error': '系统错误',\n  'Network Error': '网络错误',\n  'Parameter Error': '参数错误',\n  'Busy': '忙',\n  'Time Out': '超时',\n  'Abort': '中止',\n  'Not Ready': '未准备好',\n  'Not Exists': '不存在',\n  'Already Exists': '已存在',\n  'Validation Error': '校验错误',\n  'OK': 'OK',\n  'Bad Request': '错误请求',\n  'Unauthorized': '未验证',\n  'Forbidden': '无权限',\n  'Not Found': '未找到',\n  'Internal Server Error': '服务器内部错误',\n  'Service Unavailable': '无效服务'\n}\n","const lngs = {\n  zh_CN: require('./zh_CN')\n}\n\n/**\n * translate\n * @param {string} msg - msg to be translate\n * @param {string} lng - language\n * @return {String | null}\n */\nmodule.exports = function (msg, lng) {\n  if (!lng || !lngs[lng]) return null\n  return lngs[lng][msg]\n}\n","const t = require('./locale')\n\nfunction isNumber (obj) {\n  return typeof obj === 'number' && isFinite(obj)\n}\n\n/**\n * common error defines\n *\n */\nconst Err = {\n  SUCCESS: {\n    err: 0,\n    msg: 'Success'\n  },\n\n  FAIL: {\n    err: 1,\n    msg: 'Fail'\n  },\n\n  FA_SYS: {\n    err: 2,\n    msg: 'System Error'\n  },\n\n  FA_NETWORK: {\n    err: 3,\n    msg: 'Network Error'\n  },\n\n  FA_PARAMS: {\n    err: 4,\n    msg: 'Parameter Error'\n  },\n\n  FA_BUSY: {\n    err: 5,\n    msg: 'Busy'\n  },\n\n  FA_TIMEOUT: {\n    err: 6,\n    msg: 'Time Out'\n  },\n\n  FA_ABORT: {\n    err: 7,\n    msg: 'Abort'\n  },\n\n  FA_NOTREADY: {\n    err: 8,\n    msg: 'Not Ready'\n  },\n\n  FA_NOTEXISTS: {\n    err: 9,\n    msg: 'Not Exists'\n  },\n\n  FA_EXISTS: {\n    err: 10,\n    msg: 'Already Exists'\n  },\n\n  FA_VALIDATION: {\n    err: 11,\n    msg: 'Validation Error'\n  },\n\n  OK: {\n    err: 200,\n    msg: 'OK'\n  },\n\n  FA_BADREQUEST: {\n    err: 400,\n    msg: 'Bad Request'\n  },\n\n  FA_NOAUTH: {\n    err: 401,\n    msg: 'Unauthorized'\n  },\n\n  FA_NOPERMISSION: {\n    err: 403,\n    msg: 'Forbidden'\n  },\n\n  FA_NOTFOUND: {\n    err: 404,\n    msg: 'Not Found'\n  },\n\n  FA_INTERNALERROR: {\n    err: 500,\n    msg: 'Internal Server Error'\n  },\n\n  FA_UNAVAILABLE: {\n    err: 503,\n    msg: 'Service Unavailable'\n  }\n}\n\nErr.t = t\n\n/**\n * return message from template\n *\n * ```javascript\n * errMsg('sampe ${name} ${value}', {name: 'jeff', value: 123});\n * // return 'sample jeff 123'\n * ```\n *\n * @param {String} msg message template\n * @param {Object} opts params\n * @return {String} final message\n */\nfunction errMsg (msg, opts) {\n  if (opts) {\n    for (let key in opts) {\n      msg = msg.split('${' + key + '}').join(opts[key])\n    }\n  }\n  return msg\n}\n\nfunction isValidStatus (status) {\n  return status !== undefined && isNumber(status) && status >= 100 && status <= 600\n}\n\n/**\n * return an Err object\n * @param {Object|String} E Err object or a message\n * @return {Err}\n */\nfunction validErr (E) {\n  typeof E === 'string' && (E = { msg: E })\n  const { SUCCESS, FAIL, FA_INTERNALERROR } = Err\n  let { err = FAIL.err, status } = E\n  if (!isValidStatus(status)) {\n    isValidStatus(err) && (status = err)\n    err === SUCCESS.err && (status = 200)\n  }\n  !isValidStatus(status) && (status = FA_INTERNALERROR.err)\n  Object.assign(E, { err, status })\n  return E\n}\n\n/**\n * return an Error Object\n * @param {Object|String} E Err object or a message template\n * @param {Object} [opts] params\n * @return {Error}\n */\nfunction err (E, opts) {\n  if (E instanceof Error) {\n    const { code, status, message: msg, data } = E\n    const EE = validErr({ err: code, status })\n    Object.assign(E, EE)\n    data || (E.data = {\n      ...EE,\n      msg\n    })\n    return E\n  }\n  E = validErr(E)\n  const { err, status } = E\n  const msg = errMsg(E.msg || E.message, opts)\n  const e = new Error(msg)\n  Object.assign(e, {\n    code: err,\n    status,\n    data: {\n      ...E,\n      msg\n    } })\n  return e\n}\n\n/**\n * enable Err Object, errMsg and err function for obj\n * @param {Object} obj target object\n * @param {String} [name] name to bind\n * @return {boolean}\n */\nfunction enableErr (obj, name = 'Err') {\n  if (obj[name]) return false\n  obj[name] = Err\n  obj.err = err\n  obj.errMsg = errMsg\n  return true\n}\n\n/**\n * disable Err Object, errMsg and err function for obj\n * @param {Object} obj target object\n * @param {String} [name] name to bind\n */\nfunction disableErr (obj, name = 'Err') {\n  if (!obj[name]) return\n  delete obj[name]\n  delete obj.err\n  delete obj.errMsg\n}\n\nmodule.exports = {\n  Err,\n  validErr,\n  errMsg,\n  err,\n  t,\n  enableErr, // deprecated\n  disableErr // deprecated\n}\n"],"names":["lngs","zh_CN","require$$0","msg","lng","isNumber","obj","isFinite","Err","SUCCESS","err","FAIL","FA_SYS","FA_NETWORK","FA_PARAMS","FA_BUSY","FA_TIMEOUT","FA_ABORT","FA_NOTREADY","FA_NOTEXISTS","FA_EXISTS","FA_VALIDATION","OK","FA_BADREQUEST","FA_NOAUTH","FA_NOPERMISSION","FA_NOTFOUND","FA_INTERNALERROR","FA_UNAVAILABLE","t","errMsg","opts","key","split","join","isValidStatus","status","undefined","validErr","E","Object","assign","Error","code","message","data","EE","e","enableErr","name","disableErr"],"mappings":"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"}