{"version":3,"file":"index.esm.js","sources":["../lib/locale/zh_CN.js","../lib/locale/index.js","../lib/index.js"],"sourcesContent":["module.exports = {\n  'Success': '成功',\n  'Fail': '失败',\n  'System Error': '系统错误',\n  'Network Error': '网络错误',\n  'Parameter Error': '参数错误',\n  'Busy': '忙',\n  'Time Out': '超时',\n  'Abort': '中止',\n  'Not Ready': '未准备好',\n  'Not Exists': '不存在',\n  'Already Exists': '已存在',\n  'Validation Error': '校验错误',\n  'OK': 'OK',\n  'Bad Request': '错误请求',\n  'Unauthorized': '未验证',\n  'Forbidden': '无权限',\n  'Not Found': '未找到',\n  'Internal Server Error': '服务器内部错误',\n  'Service Unavailable': '无效服务'\n}\n","const lngs = {\n  zh_CN: require('./zh_CN')\n}\n\n/**\n * translate\n * @param {string} msg - msg to be translate\n * @param {string} lng - language\n * @return {String | null}\n */\nmodule.exports = function (msg, lng) {\n  if (!lng || !lngs[lng]) return null\n  return lngs[lng][msg]\n}\n","/**\n * err module.\n * @module err\n */\n\nconst t = require('./locale')\n\nfunction isNumber (obj) {\n  return typeof obj === 'number' && isFinite(obj)\n}\n\n/**\n * common error defines\n *\n */\nlet Err = {\n  SUCCESS: {\n    err: 0,\n    msg: 'Success'\n  },\n\n  FAIL: {\n    err: 1,\n    msg: 'Fail'\n  },\n\n  FA_SYS: {\n    err: 2,\n    msg: 'System Error'\n  },\n\n  FA_NETWORK: {\n    err: 3,\n    msg: 'Network Error'\n  },\n\n  FA_PARAMS: {\n    err: 4,\n    msg: 'Parameter Error'\n  },\n\n  FA_BUSY: {\n    err: 5,\n    msg: 'Busy'\n  },\n\n  FA_TIMEOUT: {\n    err: 6,\n    msg: 'Time Out'\n  },\n\n  FA_ABORT: {\n    err: 7,\n    msg: 'Abort'\n  },\n\n  FA_NOTREADY: {\n    err: 8,\n    msg: 'Not Ready'\n  },\n\n  FA_NOTEXISTS: {\n    err: 9,\n    msg: 'Not Exists'\n  },\n\n  FA_EXISTS: {\n    err: 10,\n    msg: 'Already Exists'\n  },\n\n  FA_VALIDATION: {\n    err: 11,\n    msg: 'Validation Error'\n  },\n\n  OK: {\n    err: 200,\n    msg: 'OK'\n  },\n\n  FA_BADREQUEST: {\n    err: 400,\n    msg: 'Bad Request'\n  },\n\n  FA_NOAUTH: {\n    err: 401,\n    msg: 'Unauthorized'\n  },\n\n  FA_NOPERMISSION: {\n    err: 403,\n    msg: 'Forbidden'\n  },\n\n  FA_NOTFOUND: {\n    err: 404,\n    msg: 'Not Found'\n  },\n\n  FA_INTERNALERROR: {\n    err: 500,\n    msg: 'Internal Server Error'\n  },\n\n  FA_UNAVAILABLE: {\n    err: 503,\n    msg: 'Service Unavailable'\n  }\n}\n\nErr.t = t\n\n/**\n * return message from template\n *\n * ```javascript\n * errMsg('sampe ${name} ${value}', {name: 'jeff', value: 123});\n * // return 'sample jeff 123'\n * ```\n *\n * @param {String} msg message template\n * @param {Object} opts params\n * @return {String} final message\n */\nfunction errMsg (msg, opts) {\n  if (opts) {\n    for (let key in opts) {\n      msg = msg.split('${' + key + '}').join(opts[key])\n    }\n  }\n  return msg\n}\n\n/**\n * return an Error Object\n * @param {Object|String} E Err object or a message template\n * @param {Object} [opts] params\n * @return {Error}\n */\nfunction err (E, opts) {\n  if (typeof E === 'string') {\n    E = {\n      msg: E\n    }\n  }\n  let msg = errMsg(E.msg || E.message, opts)\n  let code = E.err\n  code === undefined && (code = Err.FAIL.err)\n  let status = Err.FA_INTERNALERROR.err\n  if (code === Err.SUCCESS.err) status = 200\n  if (isNumber(code) && code >= 200 && code <= 600) status = code\n  E.status !== undefined && (status = E.status)\n  let e = new Error(msg)\n  e.code = code\n  e.status = status\n  e.data = Object.assign(E, { err: code, msg, status })\n  return e\n}\n\n/**\n * enable Err Object, errMsg and err function for obj\n * @param {Object} obj target object\n * @param {String} [name] name to bind\n * @return {boolean}\n */\nfunction enableErr (obj, name = 'Err') {\n  if (obj[name]) return false\n  obj[name] = Err\n  obj.err = err\n  obj.errMsg = errMsg\n  return true\n}\n\n/**\n * disable Err Object, errMsg and err function for obj\n * @param {Object} obj target object\n * @param {String} [name] name to bind\n */\nfunction disableErr (obj, name = 'Err') {\n  if (!obj[name]) return\n  delete obj[name]\n  delete obj.err\n  delete obj.errMsg\n}\n\nlet $ = {\n  Err: Err,\n  errMsg: errMsg,\n  err: err,\n  enableErr: enableErr,\n  disableErr: disableErr\n}\n\nmodule.exports = $\n"],"names":["lngs","zh_CN","require$$0","msg","lng","isNumber","obj","isFinite","Err","SUCCESS","err","FAIL","FA_SYS","FA_NETWORK","FA_PARAMS","FA_BUSY","FA_TIMEOUT","FA_ABORT","FA_NOTREADY","FA_NOTEXISTS","FA_EXISTS","FA_VALIDATION","OK","FA_BADREQUEST","FA_NOAUTH","FA_NOPERMISSION","FA_NOTFOUND","FA_INTERNALERROR","FA_UNAVAILABLE","t","errMsg","opts","key","split","join","E","message","code","undefined","status","e","Error","data","Object","assign","enableErr","name","disableErr","$"],"mappings":"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"}