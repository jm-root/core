{"version":3,"file":"index.esm.js","sources":["../lib/argv.js","../lib/index.js"],"sourcesContent":["// 参数值转为boolean\nfunction arg2bool (value) {\n  if (value === undefined) return value\n  const type = typeof value\n  if (type === 'boolean') {\n    return value\n  } else if (type === 'string') {\n    if (value === 'true') return true\n    return !!Number(value)\n  } else if (type === 'number') {\n    return !!value\n  }\n  return false\n}\n\n// 参数值转为数字\nfunction arg2number (value) {\n  if (value === undefined) return value\n  const type = typeof value\n  if (type === 'number') {\n    return value\n  } else if (type === 'boolean') {\n    return value ? 1 : 0\n  } else if (type === 'string') {\n    if (value === 'false') {\n      return 0\n    } else if (value === 'true') {\n      return 1\n    } else {\n      return Number(value)\n    }\n  }\n  return 0\n}\n\nmodule.exports = {\n  arg2bool,\n  arg2number\n}\n","const { arg2bool, arg2number } = require('./argv')\n\nlet argsClass = '[object Arguments]'\nlet arrayClass = '[object Array]'\nlet boolClass = '[object Boolean]'\nlet dateClass = '[object Date]'\nlet funcClass = '[object Function]'\nlet numberClass = '[object Number]'\nlet objectClass = '[object Object]'\nlet regexpClass = '[object RegExp]'\nlet stringClass = '[object String]'\n\n/** Used to identify object classifications that `cloneDeep` supports */\nlet cloneableClasses = {}\ncloneableClasses[funcClass] = false\ncloneableClasses[argsClass] = true\ncloneableClasses[arrayClass] = true\ncloneableClasses[boolClass] = true\ncloneableClasses[dateClass] = true\ncloneableClasses[numberClass] = true\ncloneableClasses[objectClass] = true\ncloneableClasses[regexpClass] = true\ncloneableClasses[stringClass] = true\n\nlet ctorByClass = {}\nctorByClass[arrayClass] = Array\nctorByClass[boolClass] = Boolean\nctorByClass[dateClass] = Date\nctorByClass[objectClass] = Object\nctorByClass[numberClass] = Number\nctorByClass[regexpClass] = RegExp\nctorByClass[stringClass] = String\n\n/** Used to match regexp flags from their coerced string values */\nlet reFlags = /\\w*$/\n\nlet cloneDeep = function (obj) {\n  if (typeof obj !== 'object' || !obj) return obj\n  if (Array.isArray(obj)) {\n    let ret = []\n    obj.forEach(function (item) {\n      ret.push(cloneDeep(item))\n    })\n    return ret\n  }\n  let className = toString.call(obj)\n  if (!cloneableClasses[className]) {\n    return obj\n  }\n  const Ctor = ctorByClass[className]\n  switch (className) {\n    case boolClass:\n    case dateClass:\n      return new Ctor(+obj)\n\n    case numberClass:\n    case stringClass:\n      return new Ctor(obj)\n\n    case regexpClass:\n      return Ctor(obj.source, reFlags.exec(obj))\n  }\n\n  let ret = {}\n  let keys = Object.keys(obj)\n  keys.forEach(function (key) {\n    ret[key] = cloneDeep(obj[key])\n  })\n  return ret\n}\n\nlet merge = function (obj1, obj2) {\n  if (typeof obj1 !== 'object' || !obj1) return obj1\n  if (Array.isArray(obj1)) {\n    obj2.forEach(function (item) {\n      if (obj1.indexOf(item) === -1) {\n        obj1.push(item)\n      }\n    })\n    return obj1\n  }\n  let keys = Object.keys(obj2)\n  keys.forEach(function (key) {\n    if (obj1[key] && typeof obj1[key] === 'object' && typeof obj2[key] === 'object') {\n      merge(obj1[key], obj2[key])\n    } else {\n      obj1[key] = obj2[key]\n    }\n  })\n  return obj1\n}\n\nlet utils = {\n  // 高效slice\n  slice: (a, start, end) => {\n    start = start || 0\n    end = end || a.length\n    if (start < 0) start += a.length\n    if (end < 0) end += a.length\n    let r = new Array(end - start)\n    for (let i = start; i < end; i++) {\n      r[i - start] = a[i]\n    }\n    return r\n  },\n\n  formatJSON: (obj) => {\n    return JSON.stringify(obj, null, 2)\n  },\n\n  getUriProtocol: function (uri) {\n    if (!uri) return null\n    return uri.substring(0, uri.indexOf(':'))\n  },\n\n  getUriPath: function (uri) {\n    let idx = uri.indexOf('//')\n    if (idx === -1) return ''\n    idx = uri.indexOf('/', idx + 2)\n    if (idx === -1) return ''\n    uri = uri.substr(idx)\n    idx = uri.indexOf('#')\n    if (idx === -1) idx = uri.indexOf('?')\n    if (idx !== -1) uri = uri.substr(0, idx)\n    return uri\n  },\n\n  cloneDeep,\n\n  merge,\n  arg2bool,\n  arg2number\n}\n\nconst moduleUtils = function (name = 'utils') {\n  let app = this\n  app[name] = utils\n\n  return {\n    name: name,\n    unuse: function () {\n      delete app[name]\n    }\n  }\n}\n\nconst $ = {\n  utils: utils,\n  moduleUtils: moduleUtils,\n  ...utils\n}\n\nmodule.exports = $\n"],"names":["arg2bool","value","undefined","type","Number","arg2number","require$$0","argsClass","arrayClass","boolClass","dateClass","funcClass","numberClass","objectClass","regexpClass","stringClass","cloneableClasses","ctorByClass","Array","Boolean","Date","Object","RegExp","String","reFlags","cloneDeep","obj","isArray","ret","forEach","item","push","className","toString","call","Ctor","source","exec","keys","key","merge","obj1","obj2","indexOf","utils","slice","a","start","end","length","r","i","formatJSON","JSON","stringify","getUriProtocol","uri","substring","getUriPath","idx","substr","moduleUtils","name","app","unuse","$"],"mappings":"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"}